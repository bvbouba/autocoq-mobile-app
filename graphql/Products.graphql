fragment ShippingMethodFragment on ShippingMethod {
  id
    name
    metadata {
    key
    value
     }
    description
    price {
      amount
      currency
    }
    minimumOrderPrice {
      amount
      currency
    }
     maximumOrderPrice {
      amount
      currency
    }
    minimumDeliveryDays
    maximumDeliveryDays
}

fragment ProductVariantFragment on ProductVariant {
  id
  sku
  name
  media {
    id
    alt
    url
  }
  pricing {
    price {
      gross {
        amount
        currency
      }
    }
  }
  attributes {
    attribute {
      id
      slug
      name
    }
    values {
      name
      slug
      value
      boolean
      plainText
    }
  }
}


query getAvailableShippingMethods(
  $id:ID!
  $zoneName: String,
  $orderPrice: MoneyInputType
  $orderWeight: WeightInputType
){ 
 productVariant(
  id:$id,
  ){
  availableShippingMethods (zoneName:$zoneName, orderPrice: $orderPrice, orderWeight: $orderWeight){
    ...ShippingMethodFragment
  }
}
}


fragment ProductFragment on Product {
  id
  name
  description
  slug
  rating
  category {
    slug
    name
  }
  media {
    url
    alt
  }
  defaultVariant {
    ...ProductVariantFragment
  }
  pricing {
    priceRange {
      start {
        gross {
          amount
        }
      }
    }
  }
  attributes {
    attribute {
      id
      slug
      name
    }
    values {
      name
      slug
      value
      boolean
      plainText
      reference
    }
  }
  defaultVariant {
     ...ProductVariantFragment
  }
  variants {
    ...ProductVariantFragment
  }
  externalReference
  isUniversal
  fitments {
    carMakeName
    carModelName
    carEngineName
    carStartYear
    carEndYear
  }
}

query getProductById(
  $id: ID!
  $channel: String!  
  ) {
  product(id: $id, channel: $channel) {
    ...ProductFragment
  }
}

query getProductsList(
  $channel: String!
  $filter: ProductFilterInput
  $zoneName: String
  $orderPrice: MoneyInputType
  $orderWeight: WeightInputType
  ) {
  products(first: 10, channel: $channel, filter: $filter) {
    edges {
      node {
        ...ProductFragment
      }
    }
  }
}


query searchProducts(
  $channel: String!
  $search: String!
  $categories: [ID!]
  $collections: [ID!]
  $carMake:[ID!]
	$carModel:[ID!]
	$carYear:[ID!]
) {
  products(
    first: 100
    channel: $channel
    filter: {
      search: $search
      categories: $categories
      collections: $collections
    }
  ) {
    edges {
      node {
        ...ProductFragment
      }
    }
  }
}